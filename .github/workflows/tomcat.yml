name: tomcat

on: push

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: checkout files
              uses: actions/checkout@v2

            - name: list all files and java version
              run:  |
                 ls -ltr
                 java-version
            
            - name: checkout apache tomcat
              uses: actions/checkout@v2
              with:
                repository: apache/tomcat
                ref: master
                path: ./tomcat
            
            - name: setup java 9
              uses: actions/setup-java@v1
              with:
                java-version: '9.0.4'
                java-package: jdk
                architecture: x64
            
            - name: list all files and java version
              run: |
                ls -ltr
                java-version

            - name: Copy tomcat-users.xml into Tomcat configuration directory
              run: cp -v tomcat-users.xml ./tomcat/conf/tomcat-users.xml
          
            - name: Compile Tomcat
              run: |
                  cd ./tomcat
                  ant            
